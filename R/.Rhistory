st_transform(crs = "+proj=moll +R=10567000 +lon_0=0 +x_0=0 +y_0=0 +units=m +towgs84=0,0,0,0,0,0,0 +no_defs")
sf_borders <- rmapshaper::ms_innerlines(sf_countries)
sf_oceans <-
ne_download(category = "physical", type = "ocean", scale = 50, returnclass = "sf") %>%
st_transform(crs = st_crs(sf_countries))
sf_graticules <-
ne_download(category = "physical", type = "graticules_30", scale = 50, returnclass = "sf") %>%
st_transform(crs = st_crs(sf_countries))
## turn review locations into spatial objects
sf_coords <-
df_coords %>%
st_as_sf(coords = c("longitude", "latitude"), crs = 4326) %>%
st_transform(crs = st_crs(sf_countries))
View(df_coords)
df_coords2 <- df_coords %>% na.omit()
## turn review locations into spatial objects
sf_coords <-
df_coords2 %>%
st_as_sf(coords = c("longitude", "latitude"), crs = 4326) %>%
st_transform(crs = st_crs(sf_countries))
base_map <-
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "#ded6c2", color = "#ded6c2", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_countries, fill = "#ded6c2", color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "#e5ddc6", size = .15)
world_map <-base_map +
geom_sf(
data = sf_coords, aes(shape = exact_loc),
size = 1.3, color = "white"
) +
geom_sf(
data = sf_coords, aes(shape = exact_loc, fill = year_pub),
size = 1.1, stroke = .3
) +
scale_fill_viridis_c(
option = "D", direction = -1, end = .9, name = "Year of Publication",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
) +
scale_shape_manual(
values = c(21, 23), name = "Exact Location?", labels = c("No", "Yes"),
guide = guide_legend(title.position = "top", order = 2,
override.aes = list(fill = "#289689", size = 4))
)
world_map
View(df_coords2)
base_map <-
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "#ded6c2", color = "#ded6c2", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_countries, fill = "#ded6c2", color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "#e5ddc6", size = .15)
world_map <-base_map +
geom_sf(
data = sf_coords, aes(shape = exact_location),
size = 1.3, color = "white"
) +
geom_sf(
data = sf_coords, aes(shape = exact_location, fill = year_pub),
size = 1.1, stroke = .3
) +
scale_fill_viridis_c(
option = "D", direction = -1, end = .9, name = "Year of Publication",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
) +
scale_shape_manual(
values = c(21, 23), name = "Exact Location?", labels = c("No", "Yes"),
guide = guide_legend(title.position = "top", order = 2,
override.aes = list(fill = "#289689", size = 4))
)
world_map
world_map <-base_map +
geom_sf(
data = sf_coords, aes(shape = exact_location),
size = 1.3, color = "white"
) +
geom_sf(
data = sf_coords, aes(shape = exact_location, fill = year_pub),
size = 1.1, stroke = .3
) +
scale_fill_viridis_c(
option = "D", direction = -1, end = 1, name = "Year of Publication",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
) +
scale_shape_manual(
values = c(21, 23), name = "Exact Location?", labels = c("No", "Yes"),
guide = guide_legend(title.position = "top", order = 2,
override.aes = list(fill = "#289689", size = 4))
)
world_map
world_map <-base_map +
geom_sf(
data = sf_coords, aes(shape = exact_location),
size = 1.3, color = "white"
) +
geom_sf(
data = sf_coords, aes(shape = exact_location, fill = year_pub),
size = 1.1, stroke = .3
) +
scale_fill_viridis_c(
option = "D", direction = -1, end = .9, name = "Year of Publication",
guide = guide_colorsteps(
barwidth = unit(15, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
) +
scale_shape_manual(
values = c(21, 23), name = "Exact Location?", labels = c("No", "Yes"),
guide = guide_legend(title.position = "top", order = 2,
override.aes = list(fill = "#289689", size = 4))
)
world_map
world_map <-base_map +
geom_sf(
data = sf_coords, aes(shape = exact_location),
size = 1.3, color = "white"
) +
geom_sf(
data = sf_coords, aes(shape = exact_location, fill = year_pub),
size = 1.1, stroke = .3
) +
scale_fill_viridis_c(
option = "D", direction = -1, end = .9, name = "Year of Publication",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
) +
scale_shape_manual(
values = c(21, 23), name = "Exact Location?", labels = c("No", "Yes"),
guide = guide_legend(title.position = "top", order = 2,
override.aes = list(fill = "#289689", size = 4))
)
world_map <-base_map +
geom_sf(
data = sf_coords, aes(shape = exact_location),
size = 1.3, color = "white"
) +
geom_sf(
data = sf_coords, aes(shape = exact_location, fill = year_pub),
size = 1.1, stroke = .3
) +
scale_fill_viridis_c(
option = "D", direction = -1, end = .9, name = "Year of Publication",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
) +
scale_shape_manual(
values = c(21, 23), name = "Exact Location?", labels = c("No", "Yes"),
guide = guide_legend(title.position = "top", order = 2,
override.aes = list(fill = "#289689", size = 4))
)
world_map
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 9, fig.height = 5, dpi = 500,
retina = 1, fig.showtext = TRUE, layout = "l-page")
rm(list=ls())
library(tidyverse)
library(sf)
library(rnaturalearth)
library(rmapshaper)
library(scico)
library(here)
library(viridis)
theme_set(theme_void(base_family = "TrebuchetMS", base_size = 11))
theme_update(
legend.position = "top",
legend.spacing = unit(2, "lines"),
legend.title = element_text(face = "bold")
)
## rectangular data of counts per country
df_counts <- read_csv2(here::here("data-raw", "geo-raw", "country_counts_12012023.csv"))
## data for world map
sf_countries <-
ne_download(scale = 50, returnclass = "sf") %>%
st_transform(crs = "+proj=moll +R=10567000 +lon_0=0 +x_0=0 +y_0=0 +units=m +towgs84=0,0,0,0,0,0,0 +no_defs")
sf_borders <- rmapshaper::ms_innerlines(sf_countries)
sf_oceans <-
ne_download(category = "physical", type = "ocean", scale = 50, returnclass = "sf") %>%
st_transform(crs = st_crs(sf_countries))
sf_graticules <-
ne_download(category = "physical", type = "graticules_30", scale = 50, returnclass = "sf") %>%
st_transform(crs = st_crs(sf_countries))
## merge counts with world map
sf_counts <-
sf_countries %>%
dplyr::select("ADM0_A3") %>%
left_join(df_counts, by = c("ADM0_A3" = "country_code"))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "bamako", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 18, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggsave(here::here("plots", "map_wolf_review_country_counts_trans.png"),
width = 9, height = 5, dpi = 500)
ggsave(here::here("plots", "map_wolf_review_country_counts_white.png"),
width = 9, height = 5, dpi = 500, bg = "white")
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "batlow", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 18, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggsave(here::here("plots", "map_country_counts_viridis_d_trans.png"),
width = 9, height = 5, dpi = 500)
ggsave(here::here("plots", "map_country_counts_viridis_d_white.png"),
width = 9, height = 5, dpi = 500, bg = "white")
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(5,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(6,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=6), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggsave(here::here("plots", "map_country_counts_viridis_d_trans.png"),
width = 9, height = 5, dpi = 500)
ggsave(here::here("plots", "map_country_counts_viridis_d_trans.png"),
width = 9, height = 5, dpi = 500)
ggsave(here::here("plots", "map_country_counts_viridis_d_white.png"),
width = 9, height = 5, dpi = 500, bg = "white")
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "bamako", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "A", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
?scico_palette_names
scico_palette_data()
scico_palette_names()
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "acton", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "batlow", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "berlin", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "bukavu", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scico::scale_fill_scico(
palette = "tofino", direction = -1, end = .9, name = "Number of Publications",
breaks = seq(3, 33, by = 3), na.value = "grey92",
guide = guide_colorsteps(
barwidth = unit(11, "lines"), barheight = unit(.5, "lines"),
title.position = "top", order = 1, show.limits = TRUE
)
)
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "A", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "B", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "C", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "E", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "F", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "H", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggsave(here::here("plots", "map_country_counts_viridis_d_trans.png"),
width = 9, height = 5, dpi = 500)
ggsave(here::here("plots", "map_country_counts_viridis_d_trans.png"),
width = 9, height = 5, dpi = 500)
ggsave(here::here("plots", "map_country_counts_viridis_d_white.png"),
width = 9, height = 5, dpi = 500, bg = "white")
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(9,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
ggplot() +
geom_sf(data = sf_oceans, fill = "#d8e5f0", color = "#d8e5f0", size = .15) +
geom_sf(data = sf_countries, fill = "grey92", color = "grey92", size = .15) +
geom_sf(data = sf_graticules, color = "white", size = .1) +
geom_sf(data = sf_counts, aes(fill = country_count), color = "transparent", size = .01) +
geom_sf(data = sf_borders, color = "grey92", size = .15) +
scale_fill_gradientn(colours = viridis(256,option = "D", alpha = 1, direction = -1, begin = 0, end = .9), limits=c(1,33),breaks=seq(3,33, by=3), name="Number of Publications", space = "Lab", na.value = "grey92", guide= guide_colorsteps(barwidth=unit(11,"lines"), barheight = unit(.5,"lines"), title.position ="top", order=1, show.limits = TRUE))
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 9, fig.height = 5, dpi = 500,
retina = 1, fig.showtext = TRUE, layout = "l-page")
rm(list=ls())
library(tidyverse)
library(sf)
library(rnaturalearth)
library(rmapshaper)
library(scico)
library(here)
theme_set(theme_void(base_family = "TrebuchetMS", base_size = 11))
theme_update(
legend.position = "top",
legend.spacing = unit(2, "lines"),
legend.title = element_text(face = "bold")
)
## rectangular dsata of coordinates and coutns per country
df_coords <- read_csv2(here::here("data-raw", "geo-raw", "study_coords_20_12_2022.csv"))
df_coords2 <- df_coords %>% na.omit()
## data for world map
sf_countries <-
ne_download(scale = 50, returnclass = "sf") %>%
st_transform(crs = "+proj=moll +R=10567000 +lon_0=0 +x_0=0 +y_0=0 +units=m +towgs84=0,0,0,0,0,0,0 +no_defs")
sf_borders <- rmapshaper::ms_innerlines(sf_countries)
sf_oceans <-
ne_download(category = "physical", type = "ocean", scale = 50, returnclass = "sf") %>%
st_transform(crs = st_crs(sf_countries))
sf_graticules <-
ne_download(category = "physical", type = "graticules_30", scale = 50, returnclass = "sf") %>%
st_transform(crs = st_crs(sf_countries))
## turn review locations into spatial objects
sf_coords <-
df_coords2 %>%
st_as_sf(coords = c("longitude", "latitude"), crs = 4326) %>%
st_transform(crs = st_crs(sf_countries))
View(df_coords)
newdf <- df_coords$study_area_size
newdf
na.omit(newdf)
nonanewdf<- na.omit(newdf)
summary(nonanewdf)
view(nonanewdf)
View(df_coords)
df_coords
summary(df_coords)
View(df_coords2)
citation("AICcmodagv")
citation("AICcmodavg")
packageVersion("lme4")
packageVersion("tidyverse","sf","mapview","terra")
packageVersion(c("tidyverse","sf","mapview","terra"))
packageVersion("tidyverse")
packageVersion("sf")
packageVersion("mapview")
packageVersion("terra")
packageVersion("rlist")
packageVersion("AICcmodavg")
packageVersion("rnaturalearth")
citation("rnaturalearth")
packageVersion("rmapshaper")
citation("rmapshaper")
??here
citation(R)
citation()
